<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIVYA-DATA | Energy Aura Scanner</title>
    <!-- Chart.js for Energy Stability Visualization -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --blush-pink: #FCE7F3;
            --soft-lilac: #EDE9FE;
            --sky-blue: #E0F2FE;
            --cream-white: #FFFBFA;
            --deep-lavender: #8B5CF6;
            --vibrant-pink: #EC4899;
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.4);
            --text-main: #4B5563;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--cream-white);
            background: radial-gradient(circle at top left, var(--blush-pink) 0%, var(--cream-white) 40%),
                        radial-gradient(circle at bottom right, var(--sky-blue) 0%, var(--cream-white) 40%);
            min-height: 100vh;
            color: var(--text-main);
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- BACKGROUND ANIMATIONS --- */
        .glow-orb {
            position: fixed;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.5;
            animation: float 20s infinite alternate ease-in-out;
        }
        .orb-1 { background: var(--blush-pink); top: -100px; left: -100px; }
        .orb-2 { background: var(--sky-blue); bottom: -100px; right: -100px; animation-delay: -5s; }

        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(50px, 100px) scale(1.2); }
        }

        header {
            padding: 2.5rem 1rem;
            text-align: center;
            width: 100%;
        }

        .brand {
            font-size: 0.85rem;
            letter-spacing: 0.4rem;
            font-weight: 800;
            color: var(--deep-lavender);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        h1 {
            font-size: 2.4rem;
            font-weight: 300;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        /* --- MAIN CONTAINER --- */
        main {
            width: 90%;
            max-width: 550px;
            margin-bottom: 5rem;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 2.5rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.04);
            transition: all 0.4s ease;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 0.6rem;
            color: #6B7280;
            text-transform: uppercase;
            letter-spacing: 0.05rem;
        }

        input {
            width: 100%;
            padding: 14px 18px;
            border-radius: 16px;
            border: 1px solid #E5E7EB;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        input:focus {
            border-color: var(--deep-lavender);
            box-shadow: 0 0 0 4px var(--soft-lilac);
            transform: translateY(-1px);
        }

        .btn-scan {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--vibrant-pink), var(--deep-lavender));
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-top: 1rem;
        }

        .btn-scan:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 35px rgba(139, 92, 246, 0.4);
        }

        /* --- SCANNING OVERLAY --- */
        #scanner-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95);
            z-index: 1000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .aura-loader {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--blush-pink), var(--sky-blue), var(--soft-lilac));
            animation: pulse-aura 1.5s infinite alternate ease-in-out;
            filter: blur(25px);
        }

        @keyframes pulse-aura {
            from { transform: scale(1); opacity: 0.4; }
            to { transform: scale(1.4); opacity: 0.8; }
        }

        /* --- RESULTS SECTION --- */
        #results {
            display: none;
            animation: slideUp 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .aura-viz-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2.5rem;
            position: relative;
        }

        canvas#auraCanvas {
            width: 300px;
            height: 300px;
            filter: drop-shadow(0 0 30px rgba(0,0,0,0.05));
        }

        .aura-title {
            margin-top: -20px;
            text-align: center;
            z-index: 10;
        }

        .aura-name {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--deep-lavender), var(--vibrant-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.2rem;
            margin-bottom: 2rem;
        }

        .stat-box {
            background: white;
            padding: 1.2rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.02);
            border: 1px solid rgba(0,0,0,0.03);
        }

        .stat-value {
            display: block;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--deep-lavender);
        }

        /* --- ENERGY BARS --- */
        .energy-details {
            margin-bottom: 2.5rem;
        }
        .energy-bar-wrap {
            margin-bottom: 1rem;
        }
        .bar-label-group {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            margin-bottom: 0.4rem;
            font-weight: 600;
            color: #4B5563;
        }
        .bar-bg {
            height: 8px;
            background: #F3F4F6;
            border-radius: 10px;
            overflow: hidden;
        }
        .bar-fill {
            height: 100%;
            border-radius: 10px;
            width: 0%;
            transition: width 1.5s cubic-bezier(0.1, 0.7, 1, 0.1);
        }

        .advice-box {
            background: linear-gradient(to bottom right, var(--sky-blue), var(--soft-lilac));
            color: #1E40AF;
            padding: 1.5rem;
            border-radius: 24px;
            font-size: 1rem;
            line-height: 1.6;
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
        }

        .advice-box::before {
            content: '‚ú¶';
            position: absolute;
            top: -10px;
            left: 20px;
            background: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: none;
            border: 1px solid #E5E7EB;
            padding: 14px;
            width: 100%;
            border-radius: 16px;
            margin-top: 2rem;
            cursor: pointer;
            color: #9CA3AF;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: white;
            color: var(--deep-lavender);
            border-color: var(--deep-lavender);
        }

        .error-message {
            color: #EF4444;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: none;
        }

        /* Responsive Adjustments */
        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            .glass-card { padding: 1.5rem; border-radius: 24px; }
            canvas#auraCanvas { width: 240px; height: 240px; }
        }
    </style>
</head>
<body>

    <div class="glow-orb orb-1"></div>
    <div class="glow-orb orb-2"></div>

    <header>
        <div class="brand">Divya-Data</div>
        <h1>Energy Aura Scanner</h1>
        <p style="color: #6B7280; font-style: italic;">Deep alignment and cosmic stability insights</p>
    </header>

    <main>
        <!-- INPUT SECTION -->
        <section id="input-screen" class="glass-card">
            <div class="input-group">
                <label for="userName">Soul Name</label>
                <input type="text" id="userName" placeholder="Your name here" required>
            </div>

            <div class="input-group">
                <label for="birthDate">Date of Birth</label>
                <input type="date" id="birthDate" required>
                <div id="dateError" class="error-message">We need your cosmic origin date.</div>
            </div>

            <div class="input-group">
                <label for="birthTime">Time of Birth (Refines Lunar Accuracy)</label>
                <input type="time" id="birthTime">
            </div>

            <button class="btn-scan" onclick="startScan()">Begin Energy Synthesis</button>
            
            <div style="margin-top: 2rem; display: flex; justify-content: space-around; opacity: 0.5; filter: grayscale(1);">
                <span style="font-size: 1.2rem;">‚ú®</span>
                <span style="font-size: 1.2rem;">üåô</span>
                <span style="font-size: 1.2rem;">ü™ê</span>
                <span style="font-size: 1.2rem;">üßø</span>
            </div>
        </section>

        <!-- RESULTS SECTION -->
        <section id="results">
            <div class="glass-card">
                <div class="aura-viz-container">
                    <canvas id="auraCanvas"></canvas>
                    <div class="aura-title">
                        <span class="stat-label">Cosmic Vibration</span>
                        <div class="aura-name" id="auraName">Radiant Violet</div>
                    </div>
                </div>

                <div class="stat-grid">
                    <div class="stat-box">
                        <span class="stat-value" id="stabilityScore">88%</span>
                        <span class="stat-label">Emotional Stability</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-value" id="dominantElement">Water</span>
                        <span class="stat-label">Core Element</span>
                    </div>
                </div>

                <!-- Detailed Breakdown -->
                <div class="energy-details">
                    <div class="energy-bar-wrap">
                        <div class="bar-label-group">
                            <span>Moon Stress Resistance</span>
                            <span id="moonStressVal">0%</span>
                        </div>
                        <div class="bar-bg"><div id="moonBar" class="bar-fill" style="background: var(--sky-blue);"></div></div>
                    </div>
                    <div class="energy-bar-wrap">
                        <div class="bar-label-group">
                            <span>Saturn Integration</span>
                            <span id="saturnVal">0%</span>
                        </div>
                        <div class="bar-bg"><div id="saturnBar" class="bar-fill" style="background: var(--soft-lilac);"></div></div>
                    </div>
                    <div class="energy-bar-wrap">
                        <div class="bar-label-group">
                            <span>Intuitive Clarity</span>
                            <span id="intuitionVal">0%</span>
                        </div>
                        <div class="bar-bg"><div id="intuitionBar" class="bar-fill" style="background: var(--vibrant-pink);"></div></div>
                    </div>
                </div>

                <div id="insights" style="margin-bottom: 2rem; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 1.5rem;">
                    <h3 style="font-size: 1.1rem; margin-bottom: 0.8rem; display: flex; align-items: center; gap: 8px;">
                        <span>üìú</span> Energy Profile
                    </h3>
                    <p id="insightText" style="font-size: 0.95rem; color: #4B5563; line-height: 1.6;"></p>
                </div>

                <div class="advice-box">
                    <strong style="display: block; margin-bottom: 0.5rem; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.05rem;">Protection Advice</strong>
                    <p id="protectionAdvice"></p>
                </div>

                <button class="back-btn" onclick="resetApp()">New Energy Scan</button>
            </div>
        </section>
    </main>

    <!-- LOADING OVERLAY -->
    <div id="scanner-overlay">
        <div class="aura-loader"></div>
        <h2 style="margin-top: 2.5rem; font-weight: 300; letter-spacing: 0.3rem; text-transform: uppercase; font-size: 1.2rem;">Scanning Aura...</h2>
        <p id="scan-step" style="color: #9CA3AF; margin-top: 0.8rem; font-size: 0.9rem;">Mapping celestial coordinates</p>
    </div>

    <script>
        let animationFrameId = null;

        // Enhanced Constants
        const ELEMENTS = ["Fire", "Earth", "Air", "Water"];
        const ZODIAC_SIGNS = [
            { name: "Aries", element: "Fire" }, { name: "Taurus", element: "Earth" }, 
            { name: "Gemini", element: "Air" }, { name: "Cancer", element: "Water" },
            { name: "Leo", element: "Fire" }, { name: "Virgo", element: "Earth" }, 
            { name: "Libra", element: "Air" }, { name: "Scorpio", element: "Water" },
            { name: "Sagittarius", element: "Fire" }, { name: "Capricorn", element: "Earth" }, 
            { name: "Aquarius", element: "Air" }, { name: "Pisces", element: "Water" }
        ];

        const AURA_COLORS = {
            "Fire": { name: "Solar Amber", color: "#FBBF24", secondary: "#EF4444", text: "Your aura blazes with 'Solar Amber', indicating a soul that thrives on movement and direct impact. You are a natural catalyst for change, though you must guard your energy against those who seek to extinguish your spark for their own comfort." },
            "Earth": { name: "Verdant Quartz", color: "#34D399", secondary: "#065F46", text: "You resonate with 'Verdant Quartz', a frequency of extreme reliability and manifestation. You have the rare gift of turning thoughts into physical reality, but often carry the weight of others' expectations. Release the need to be everyone's foundation." },
            "Air": { name: "Celestial Ether", color: "#A5B4FC", secondary: "#6366F1", text: "Your energy vibrates as 'Celestial Ether'‚Äîthe color of expansive thought and freedom. You are connected to the collective consciousness, picking up on trends and emotions before others. Your challenge is anchoring your spirit to the present moment." },
            "Water": { name: "Luminous Abyss", color: "#818CF8", secondary: "#EC4899", text: "You radiate 'Luminous Abyss', suggesting deep emotional intelligence and hidden psychic depths. You act as a mirror for the world, reflecting people's true selves back at them. Protect your boundaries; not everyone is ready for the truth you reflect." }
        };

        function startScan() {
            const dateInput = document.getElementById('birthDate').value;
            if (!dateInput) {
                document.getElementById('dateError').style.display = 'block';
                return;
            }
            document.getElementById('dateError').style.display = 'none';

            const overlay = document.getElementById('scanner-overlay');
            overlay.style.display = 'flex';

            const steps = [
                "Locating natal moon phase...",
                "Calculating Saturn-Jupiter square tension...",
                "Isolating elemental dominance...",
                "Decoding karmic stability markers...",
                "Synthesizing aura particles..."
            ];
            let stepIdx = 0;
            
            const stepInterval = setInterval(() => {
                document.getElementById('scan-step').innerText = steps[stepIdx];
                stepIdx++;
                if (stepIdx >= steps.length) {
                    clearInterval(stepInterval);
                    setTimeout(showResults, 1000);
                }
            }, 700);
        }

        function calculateAstrology(dob, time) {
            const date = new Date(dob + (time ? 'T' + time : ''));
            const day = date.getDate();
            const month = date.getMonth(); 
            const year = date.getFullYear();

            // Accurate Zodiac Calculation
            let signIndex = month;
            if (day < 21) signIndex = (month - 1 + 12) % 12;
            const sign = ZODIAC_SIGNS[signIndex];
            const element = sign.element;

            // Moon Stress Logic (Lunar Cycle 29.5 days)
            const refDate = new Date('2024-01-11');
            const diffTime = Math.abs(date - refDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const lunarDay = diffDays % 29.5;
            const moonPhaseEffect = Math.sin((lunarDay / 29.5) * Math.PI);
            
            // Saturn Tension
            const currentYear = new Date().getFullYear();
            const age = currentYear - year;
            const saturnCycle = (age % 29.5) / 29.5;
            const saturnPressure = Math.abs(Math.sin(saturnCycle * Math.PI * 4));

            // Metrics
            const moonResistance = Math.round(85 - (moonPhaseEffect * 25));
            const saturnIntegration = Math.round(90 - (saturnPressure * 30));
            const intuition = Math.round(70 + (lunarDay / 29.5) * 30);
            const stability = Math.round((moonResistance + saturnIntegration + intuition) / 3);

            return {
                element,
                stability,
                moonResistance,
                saturnIntegration,
                intuition,
                colorData: AURA_COLORS[element]
            };
        }

        function drawAura(color1, color2) {
            const canvas = document.getElementById('auraCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 500;
            canvas.height = 500;

            const particles = [];
            for(let i = 0; i < 40; i++) {
                particles.push({
                    x: canvas.width/2,
                    y: canvas.height/2,
                    r: Math.random() * 80 + 20,
                    angle: Math.random() * Math.PI * 2,
                    speed: Math.random() * 0.02 + 0.005,
                    dist: Math.random() * 60 + 40
                });
            }

            let tick = 0;

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;

                // Base Glow
                const baseRad = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 180);
                baseRad.addColorStop(0, color1 + '33');
                baseRad.addColorStop(0.6, color2 + '11');
                baseRad.addColorStop(1, 'transparent');
                ctx.fillStyle = baseRad;
                ctx.beginPath();
                ctx.arc(centerX, centerY, 200, 0, Math.PI * 2);
                ctx.fill();

                // Dynamic Wisps
                particles.forEach((p, i) => {
                    p.angle += p.speed;
                    const x = centerX + Math.cos(p.angle) * p.dist;
                    const y = centerY + Math.sin(p.angle) * p.dist;
                    
                    const g = ctx.createRadialGradient(x, y, 0, x, y, p.r);
                    g.addColorStop(0, i % 2 === 0 ? color1 + '66' : color2 + '44');
                    g.addColorStop(1, 'transparent');
                    
                    ctx.fillStyle = g;
                    ctx.beginPath();
                    ctx.arc(x, y, p.r, 0, Math.PI * 2);
                    ctx.fill();
                });

                // Core Pulse
                const pulse = Math.sin(tick * 0.05) * 10;
                const coreRad = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 80 + pulse);
                coreRad.addColorStop(0, 'white');
                coreRad.addColorStop(0.4, color1);
                coreRad.addColorStop(1, 'transparent');
                ctx.fillStyle = coreRad;
                ctx.beginPath();
                ctx.arc(centerX, centerY, 80 + pulse, 0, Math.PI * 2);
                ctx.fill();
                
                tick++;
                animationFrameId = requestAnimationFrame(animate);
            }
            
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            animate();
        }

        function showResults() {
            const dob = document.getElementById('birthDate').value;
            const time = document.getElementById('birthTime').value;
            const data = calculateAstrology(dob, time);

            document.getElementById('scanner-overlay').style.display = 'none';
            document.getElementById('input-screen').style.display = 'none';
            document.getElementById('results').style.display = 'block';

            // Stats
            document.getElementById('auraName').innerText = data.colorData.name;
            document.getElementById('stabilityScore').innerText = data.stability + "%";
            document.getElementById('dominantElement').innerText = data.element;
            document.getElementById('insightText').innerText = data.colorData.text;

            // Bar Animations - Mapping logic to correct IDs
            setTimeout(() => {
                updateBar('moon', data.moonResistance);
                updateBar('saturn', data.saturnIntegration);
                updateBar('intuition', data.intuition);
            }, 300);

            const adviceData = {
                "Fire": "Avoid energetic stimulants after 6 PM. Use Citrine to stabilize your solar plexus. Ground yourself by walking barefoot for 5 minutes daily.",
                "Earth": "Prioritize digital detoxing during the weekend. Use Black Tourmaline for psychic shielding. Speak your truth, even if your voice shakes.",
                "Air": "Silence the mental chatter with blue-light filters. Use Amethyst near your sleeping space. Practice 'Box Breathing' during transitions in your day.",
                "Water": "Cleanse your energy field with a salt bath once a week. Use Selenite to clear stagnant emotions. Say 'no' without explaining yourself."
            };
            document.getElementById('protectionAdvice').innerText = adviceData[data.element];

            drawAura(data.colorData.color, data.colorData.secondary);
        }

        function updateBar(key, value) {
            // Mapping keys like 'moon' to HTML IDs like 'moonBar' and 'moonStressVal'
            const barId = key + 'Bar';
            const valId = (key === 'moon' ? 'moonStressVal' : (key + 'Val'));
            
            const barElement = document.getElementById(barId);
            const valElement = document.getElementById(valId);
            
            if (barElement) barElement.style.width = value + '%';
            if (valElement) valElement.innerText = value + '%';
        }

        function resetApp() {
            if (animationFrameId) cancelAnimationFrame(animationFrameId);
            document.getElementById('results').style.display = 'none';
            document.getElementById('input-screen').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            ['moon', 'saturn', 'intuition'].forEach(key => {
                const bar = document.getElementById(key + 'Bar');
                const val = document.getElementById(key === 'moon' ? 'moonStressVal' : (key + 'Val'));
                if (bar) bar.style.width = '0%';
                if (val) val.innerText = '0%';
            });
        }
    </script>
</body>
</html>
